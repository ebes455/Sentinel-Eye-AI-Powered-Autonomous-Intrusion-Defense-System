<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SENTINEL-EYE | Network Fortress</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Leaflet.js for Map -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

    <!-- Chart.js for Velocity Graph -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

    <!-- Pusher for WebSocket (Laravel Echo uses Pusher client) -->
    <script src="https://js.pusher.com/8.2.0/pusher.min.js"></script>

    <!-- Laravel Echo -->
    <script src="https://cdn.jsdelivr.net/npm/laravel-echo@1.16.0/dist/echo.iife.js"></script>

    <!-- Custom Styles -->
    <link rel="stylesheet" href="css/cyberpunk.css">
</head>

<body class="bg-slate-950 text-green-400 font-mono overflow-hidden">

    <!-- Header -->
    <header class="border-b-2 border-green-500/40 p-4 backdrop-blur-sm bg-slate-900/50">
        <div class="container mx-auto flex justify-between items-center">
            <div class="flex items-center space-x-4">
                <div class="text-3xl font-bold tracking-wider neon-text">
                    üõ°Ô∏è SENTINEL-EYE
                </div>
                <div class="text-sm opacity-70">AI-Driven Network Fortress</div>
            </div>
            <div class="flex items-center space-x-6">
                <div id="targetStatus"
                    class="flex items-center space-x-2 bg-green-500/10 border border-green-500/30 px-4 py-1 rounded-full">
                    <span class="status-pulse w-3 h-3 bg-green-500 rounded-full"></span>
                    <span id="targetStatusText" class="text-xs font-bold text-green-500 tracking-tighter">ANAS_SERVER:
                        SECURE</span>
                </div>
                <button id="downloadReport"
                    class="px-4 py-2 bg-green-500 text-black font-bold text-xs uppercase tracking-widest hover:bg-white transition-all shadow-[0_0_15px_rgba(34,197,94,0.3)]">
                    Download Forensic Report
                </button>
                <div class="status-indicator">
                    <span id="wsStatus" class="status-dot bg-gray-500"></span>
                    <span id="wsStatusText">DISCONNECTED</span>
                </div>
                <div class="text-sm">
                    <span class="opacity-70">THREATS:</span>
                    <span id="totalThreats" class="text-red-500 font-bold text-lg">0</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Dashboard Grid -->
    <main class="container mx-auto p-4 h-[calc(100vh-80px)]">
        <div class="grid grid-cols-12 gap-4 h-full">

            <!-- Left Column: Live Feed -->
            <div class="col-span-4 cyberpunk-panel h-full overflow-hidden flex flex-col">
                <div class="panel-header">
                    <span>üì° LIVE THREAT FEED</span>
                </div>
                <div id="liveFeed" class="flex-1 overflow-y-auto p-4 space-y-2 scroll-smooth">
                    <!-- Threats will be inserted here -->
                    <div class="text-center text-green-500/50 py-8">
                        Monitoring network traffic...
                    </div>
                </div>
            </div>

            <!-- Center Column: Geographic Map -->
            <div class="col-span-5 cyberpunk-panel h-full overflow-hidden flex flex-col">
                <div class="panel-header">
                    <span>üåç THREAT ORIGINS MAP</span>
                </div>
                <div id="map" class="flex-1"></div>
            </div>

            <!-- Right Column: Velocity Chart + Stats -->
            <div class="col-span-3 space-y-4 h-full overflow-y-auto">

                <!-- Velocity Chart -->
                <div class="cyberpunk-panel">
                    <div class="panel-header">
                        <span>üìä ATTACK VELOCITY</span>
                    </div>
                    <div class="p-4">
                        <canvas id="velocityChart"></canvas>
                    </div>
                </div>

                <!-- Threat Type Breakdown -->
                <div class="cyberpunk-panel">
                    <div class="panel-header">
                        <span>üîç ATTACK TYPES</span>
                    </div>
                    <div id="attackTypes" class="p-4 space-y-2">
                        <div class="flex justify-between text-sm">
                            <span>Port Scan:</span>
                            <span id="countPortScan" class="text-yellow-400 font-bold">0</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>ARP Spoof:</span>
                            <span id="countArpSpoof" class="text-red-400 font-bold">0</span>
                        </div>
                        <div class="flex justify-between text-sm">
                            <span>SQL Injection:</span>
                            <span id="countSqlInjection" class="text-orange-400 font-bold">0</span>
                        </div>
                        <div class="flex justify-between text-sm border-t border-green-500/20 pt-2 mt-2">
                            <span>üçØ Honeypot Trap:</span>
                            <span id="countHoneypot" class="text-cyan-400 font-bold">0</span>
                        </div>
                    </div>
                </div>

                <!-- High Risk Threats -->
                <div class="cyberpunk-panel">
                    <div class="panel-header">
                        <span>‚ö†Ô∏è HIGH RISK</span>
                    </div>
                    <div class="p-4">
                        <div class="text-4xl font-bold text-red-500 text-center" id="highRiskCount">0</div>
                        <div class="text-xs text-center opacity-70 mt-1">Threats &gt; 70 Risk Score</div>
                    </div>
                </div>

            </div>

        </div>
    </main>

    <!-- Audio Alert (optional) -->
    <audio id="alertSound" preload="auto">
        <source
            src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFAg+mvLy0nMoCDKI1fDOgTcLEWK34+eeTxAIUKD..." />
    </audio>

    <!-- Access Denied Overlay (For Block Action) -->
    <div id="accessDeniedOverlay"
        class="fixed inset-0 bg-red-900/80 backdrop-blur-xl z-[100] hidden flex-col items-center justify-center pointer-events-none">
        <div class="text-9xl font-black text-white italic tracking-tighter animate-ping">ACCESS DENIED</div>
        <div class="text-2xl font-bold text-white tracking-[1em] mt-8">THREAT NEUTRALIZED</div>
    </div>

    <!-- JavaScript Modules -->
    <script src="js/app.js" type="module"></script>
</body>

</html>